---
title: 'Play with Kubernetes — сервис для практического знакомства с K8s'
date: 2020-01-12
permalink: /posts/2020/01/blog-post-9/
tags:
  - Kubernetes
  - category1
  - category2
---

Около года мы [писали](https://habr.com/company/flant/blog/334470/) об интересном онлайн-сервисе для самообразования в мире контейнеров — [Play with Docker](https://labs.play-with-docker.com/). Его авторы, поддерживаемые компанией Docker Inc, не стояли на месте и последовали за трендами, что мы наблюдаем не только в «узком кругу» Docker, но и в индустрии в целом: они запустили новый аналогичный сервис, посвящённый уже Kubernetes. Итак, встречайте [Play with Kubernetes (PWK)!](https://habr.com/ru/company/flant/blog/415381/)  

[![](https://habrastorage.org/webt/6q/wl/wl/6qwlwl4fa387ccs2sgoiamvjolk.png)](https://labs.play-with-k8s.com/)  

## Игровая площадка PWK  

PWK полностью повторяет идею (и даже интерфейс) своего «прародителя» Play with Docker: его [основной сайт](https://labs.play-with-k8s.com/) — это так называемая «игровая площадка» (playground), предоставляющая в веб-браузере доступ к виртуальной Linux-машине для возможности проведения экспериментов с кластерами Kubernetes. По сути это доступный бесплатно SaaS-аналог Minikube со своими удобствами (работа прямо в браузере) и ограничениями (см. ниже).  

Технически для этого используются возможности технологии [Docker-in-Docker](https://hub.docker.com/_/docker/) (DIND), позволяющей запускать контейнеры Docker внутри других контейнеров Docker. _(Такой подход к работе с Docker не является рекомендуемым в общем случае, однако имеет право на жизнь в особых применениях, таких как разработка самого Docker и связанных технологий.)_ Используемые версии программного обеспечения в сервисе:  

*  «хостовая» операционная система (на ­узле) — CoreOS 7.4.1708,
*  сервер Kubernetes — 1.8.11,
*  клиент Kubernetes — 1.8.14,
*  Docker — 18.03.1-ce.  

Для эмуляции терминала в веб-браузере по-прежнему предлагается JavaScript-реализация [xterm.js](https://xtermjs.org/), для которой доступно небольшое количество настроек (выбор размера шрифта, возможность использования клавиатурных сочетаний из macOS). На площадке действуют прежние, т.е. знакомые по Play with Docker, ограничения: не более 4 часов беспрерывной работы в рамках одной сессии и не более 5 узлов кластера (по 4 Гб RAM у каждого).  

![](https://habrastorage.org/webt/ye/tq/la/yetqlakflbi98de2yq2on8--tz8.png)  

Если вход в площадку Play with Docker на сегодняшний день доступен только по Docker ID, то в случае Kubernetes есть и вторая опция — через аккаунт на GitHub.  

Фактический запуск основного сайта Play with Kubernetes — игровой площадки — прошёл «тихо и незаметно» ещё прошлым летом, однако сама по себе она не так интересна, как лабораторные работы. И вот лишь месяц назад [состоялся](https://blog.docker.com/2018/05/introducing-play-kubernetes/) публичный анонс первой такой работы, доступной на ресурсе [Play with Kubernetes Classroom](https://training.play-with-kubernetes.com/).  

## Лабораторная работа с Kubernetes  

В её основу легли труды [Jérôme Petazzoni](https://twitter.com/jpetazzo), посвятившего 7 лет своей жизни компании Docker Inc, где он [прошёл](http://jpetazzo.github.io/2018/02/17/seven-years-at-docker/) путь от SRE-инженера до евангелиста и провёл [множество семинаров](http://container.training/past.html) по работе с контейнерами и Kubernetes.  

![](https://habrastorage.org/webt/if/pr/v6/ifprv6cw36t1xywzzg70qw7irbk.jpeg)  

**Занимательный offtopic: Почему Jérôme ушёл из Docker?**

Jérôme, которого вы можете знать ещё и по [репозиторию](https://github.com/jpetazzo/dind) уже упомянутого DIND, начинал свой путь в Docker с небольшого стартапа dotCloud, конкурирующего с Heroku (~2011 год). В 2013 году компания присоединилась к Docker Inc и автор, будучи SRE, впервые выступил с докладом на тему контейнеров. Активным же докладчиком он стал уже с 2014 года, в среднем делая по 2 выступления в неделю.  

К 2016 году к этим регулярным выступлениям добавились семинары по оркестровке контейнеров… и в это же время Jérôme осознал, что исчерпал свои ресурсы. В октябре его ощущения подтвердились получением диагноза «депрессия». Последовали антидепрессанты и терапия, что привело к видимому улучшению состояния. Однако летом 2017 года Jérôme, принимая участие в исследовании о психическом здоровье, прошёл тест [Maslach Burnout Inventory](https://en.wikipedia.org/wiki/Maslach_Burnout_Inventory) на выгорание и обнаружил, что находится в «красной зоне». Пообщавшись со сведущими в этом вопросе людьми, он пришёл к решению взять перерыв в 2018 году, а перед этим приложил максимум своих усилий к реализации стратегии Docker, направленной на поддержку Kubernetes.  

> «В 2018 году я собираюсь посвятить время себе. Я изучаю Rust. Я пишу [небольшой клон [музыкального инструмента] Ableton](https://www.youtube.com/watch?v=IkKDVlW2WPk)[](http://savefrom.net/?url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DIkKDVlW2WPk&utm_source=userjs-chrome&utm_medium=extensions&utm_campaign=link_modifier "Получи прямую ссылку") для подключения grid-контроллера (вроде Monome или LaunchPad) к Raspberry Pi для воспроизведения живой музыки. Собираюсь пройти ретрит по медитации випассана. Надеюсь быть наставником для тех, кто не получил такое счастье и привилегии, как я сам, и стать лучшим союзником для них. Уход из Docker — первый шаг и самый сложный, но предстоящий путь выглядит замечательно».  

Но вернёмся к собственно Play with Kubernetes…  

Предлагаемая в онлайн-сервисе лабораторная работа ориентирована на начинающих и посвящена основным концепциям и возможностям Kubernetes:  

*  что вообще позволяет делать эта система: запуск контейнеров, балансировка нагрузки, выкатывание новых версий образов, автомасштабирование…;
*  архитектура Kubernetes;
*  ресурсы Kubernetes: узлы, поды, сервисы, пространства имён, секреты;
*  декларативный подход;
*  сетевая модель Kubernetes;
*  и т.п.  

Главное же в том, что эта теория подкрепляется практикой, ради чего всё и затевалось. В рамках практической части предлагается запустить свои первые контейнеры и научиться пробрасывать порты для них, создать deployment и масштабировать его, поработать с ресурсами в YAML, познакомиться с лейблами и селекторами… не буду подробно перечислять все этапы — лучше увидеть (и попробовать) их самостоятельно на странице [Kubernetes Hands-on Workshop](https://training.play-with-kubernetes.com/kubernetes-workshop).  

Выглядит же прохождение лабораторной работы аналогично тому, как всё было в Play with Docker: слева у вас есть документ-инструкция (в том числе и команды для ввода), а справа — терминал (точнее, их два — для двух узлов Kubernetes), позволяющий «поиграть» в администратора K8s-кластера и видеть, что и как происходит на самом деле. Последнему, безусловно, способствует возможность выполнять произвольные уточняющие команды на любых этапах выполнения работы.  

![](https://habrastorage.org/webt/dy/d3/wl/dyd3wlfdxbkwnwi20safswhhdn0.png)  

## Вместо заключения  

Сейчас в Play with Kubernetes доступна лишь одна вводная лабораторная работа, но авторы обещают создавать и новые. Их [развитие в Play with Docker](https://training.play-with-docker.com/) позволяет надеяться, что это действительно случится. Желающие же поделиться своим опытом могут это сделать в [специальном репозитории](https://github.com/play-with-docker/play-with-kubernetes.github.io) проекта.  

## P.S.  

Читайте также в нашем блоге:  

*  «[Play with Docker — онлайн-сервис для практического знакомства с Docker](https://habr.com/company/flant/blog/334470/)»;
*  «[Наш опыт с Kubernetes в небольших проектах](https://habr.com/company/flant/blog/331188/)» _(видео доклада, включающего в себя знакомство с техническим устройством Kubernetes)_;
*  «[Начало работы в Kubernetes с помощью Minikube](https://habr.com/company/flant/blog/333470/)»;
*  «Что происходит в Kubernetes при запуске kubectl run?»: [часть 1](https://habr.com/company/flant/blog/342658/) и [часть 2](https://habr.com/company/flant/blog/342822/);
*  «[Как на самом деле работает планировщик Kubernetes?](https://habr.com/company/flant/blog/335552/)»;
*  «[Иллюстрированное руководство по устройству сети в Kubernetes](https://habr.com/company/flant/blog/346304/)»;
*  «[Зачем нужен Kubernetes и почему он больше, чем PaaS?](https://habr.com/company/flant/blog/327338/)».
